;;;;;;;;;;;;;;
;;
;;  ./target/debug/tvm_linker --lib stdlib.tvm ./tests/test_pers_data.tvm [--debug]
;;
;;			Function get_external                           : id=2998B323, sign-check=false
;;			Function increment_external                     : id=F6792302, sign-check=false
;;			Function ctor_external                          : id=11864627, sign-check=false
;;
;;	Get:
;;	./target/debug/tvm_linker 9d14b4fdf187a79f651da36f7c0f30b33d49c3d329ea766d20659ed5ea88683a test --body 002998B323 --trace
;;	Increment:
;;	./target/debug/tvm_linker 9d14b4fdf187a79f651da36f7c0f30b33d49c3d329ea766d20659ed5ea88683a test --body 00F6792302 --trace
;;	Ctor:
;;	./target/debug/tvm_linker 9d14b4fdf187a79f651da36f7c0f30b33d49c3d329ea766d20659ed5ea88683a test --body 0011864627 --trace
;;


    .globl ctor_external
    BLKDROP 4

    PUSHSLICE x00000001
    PUSHINT 0
    NEWDICT
    PUSHINT 64
    DICTUSET

    NEWC
    STSLICE
    ENDC

    NEWC
    STREF
    PUSHROOT
    CTOS
    STSLICER
    ENDC
    POPROOT
    PUSHINT -1

    .globl  increment_external
    PUSHROOT
    CTOS
    LDREFRTOS
    NIP

    PUSHINT 0
    OVER
    PUSHINT 64
    DICTUGET
    THROWIFNOT 100
    LDU 32
    ENDS

    INC
    NEWC
    STU 32
    ENDC
    CTOS

    PUSHINT 0
    ROT
    PUSHINT 64
    DICTUSET
    
    NEWC
    STSLICE
    ENDC

    NEWC
    STREF
    PUSHROOT
    CTOS
    LDREF
    NIP
    STSLICER
    ENDC
    POPROOT
    
    .globl get_external
    PUSHINT 0
    PUSHROOT
    CTOS
    LDREFRTOS
    NIP
    PUSHINT 64
    DICTUGET
    THROWIFNOT 100
    LDU 32
    ENDS
